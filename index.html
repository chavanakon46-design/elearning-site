<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ó‡∏µ‡πà 3: ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root { --primary: #2563eb; --secondary: #475569; --bg: #f1f5f9; }
        body { font-family: 'Sarabun', sans-serif; background: var(--bg); margin: 0; padding: 20px; color: #1e293b; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .hidden { display: none !important; }
        .btn { background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-size: 16px; transition: 0.2s; }
        .btn:hover { background: #1d4ed8; }
        .btn-outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); }
        .btn-outline:hover { background: #eff6ff; }
        .grid-menu { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px; }
        input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #cbd5e1; border-radius: 8px; box-sizing: border-box; }
        h1, h2, h3 { color: #0f172a; margin-top: 0; }
        .lesson-header { background: #eff6ff; padding: 15px; border-left: 5px solid var(--primary); margin-bottom: 20px; border-radius: 5px; }
        .expert-card { border: 1px solid #e2e8f0; padding: 20px; border-radius: 10px; cursor: pointer; transition: 0.3s; text-align: center; }
        .expert-card:hover { transform: translateY(-3px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); border-color: var(--primary); }
        .expert-icon { font-size: 30px; margin-bottom: 10px; display: block; }
        .quiz-box { background: #f8fafc; padding: 20px; border-radius: 10px; margin-top: 20px; }
        .question { margin-bottom: 15px; border-bottom: 1px solid #e2e8f0; padding-bottom: 15px; }
        .content-box { display: none; background: #fff; padding: 20px; border: 1px solid #e2e8f0; border-radius: 10px; margin-top: 20px; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div class="container">
    
    <div id="loginSection">
        <h1 style="text-align: center;">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</h1>
        <h3 style="text-align: center; color: var(--secondary);">‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£</h3>
        <hr>
        <div style="max-width: 400px; margin: 0 auto;">
            <label>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
            <input type="text" id="stdName" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á">
            <label>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô</label>
            <input type="text" id="stdClass" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏°.2/1">
            <label>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</label>
            <input type="number" id="stdNumber" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà">
            <button class="btn" style="width: 100%; margin-top: 15px;" onclick="startSystem()">‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
        </div>
    </div>

    <div id="menuSection" class="hidden">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2 id="welcomeText">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö</h2>
            <span id="timerDisplay" style="color: var(--secondary);">‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: 00:00</span>
        </div>
        <hr>
        <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö:</p>
        <div class="grid-menu">
            <div class="expert-card" onclick="goToLesson(1)">
                <span class="expert-icon">üñ•Ô∏è</span>
                <h3>‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1</h3>
                <p>‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</p>
            </div>
            <div class="expert-card" onclick="goToLesson(2)">
                <span class="expert-icon">üõ†Ô∏è</span>
                <h3>‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2</h3>
                <p>‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤</p>
            </div>
            <div class="expert-card" onclick="goToLesson(3)">
                <span class="expert-icon">üì°</span>
                <h3>‡∏ö‡∏ó‡∏ó‡∏µ‡πà 3</h3>
                <p>‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£</p>
            </div>
        </div>
        <div style="margin-top: 30px; text-align: center;">
             <button class="btn btn-outline" onclick="finishAll()">‡∏à‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡∏™‡πà‡∏á‡∏Ñ‡∏£‡∏π)</button>
        </div>
    </div>

    <div id="lesson1Section" class="hidden">
        <div class="lesson-header">
            <h2>‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1: ‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</h2>
            <p><strong>‡∏Ñ‡∏≥‡∏ä‡∏µ‡πâ‡πÅ‡∏à‡∏á:</strong> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢ (Expert Group) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏®‡∏∂‡∏Å‡∏©‡∏≤</p>
        </div>
        <div class="grid-menu">
            <button class="btn btn-outline" onclick="showContent('L1-HW')">1. ‡∏Æ‡∏≤‡∏£‡πå‡∏î‡πÅ‡∏ß‡∏£‡πå</button>
            <button class="btn btn-outline" onclick="showContent('L1-SW')">2. ‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå</button>
            <button class="btn btn-outline" onclick="showContent('L1-PP')">3. ‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£</button>
            <button class="btn btn-outline" onclick="showContent('L1-DT')">4. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
            <button class="btn btn-outline" onclick="showContent('L1-PC')">5. ‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£</button>
        </div>
        <div id="L1-HW" class="content-box"><h3>Hardware</h3><p>‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ ‡πÄ‡∏ä‡πà‡∏ô CPU, RAM</p></div>
        <div id="L1-SW" class="content-box"><h3>Software</h3><p>‡∏ä‡∏∏‡∏î‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏Æ‡∏≤‡∏£‡πå‡∏î‡πÅ‡∏ß‡∏£‡πå‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</p></div>
        <div id="L1-PP" class="content-box"><h3>People</h3><p>‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£‡∏ó‡∏≤‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</p></div>
        <div id="L1-DT" class="content-box"><h3>Data</h3><p>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏¥‡∏ö‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®</p></div>
        <div id="L1-PC" class="content-box"><h3>Process</h3><p>‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ > ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• > ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•)</p></div>

        <button class="btn" style="width: 100%; margin-top: 20px;" onclick="startQuiz(1)">‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏¢‡πà‡∏≠‡∏¢ ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1</button>
        <button class="btn btn-outline" style="width: 100%; margin-top: 10px;" onclick="backToMenu()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
    </div>

    <div id="lesson2Section" class="hidden">
        <div class="lesson-header">
            <h2>‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2: ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤</h2>
        </div>
        <div class="grid-menu">
            <button class="btn btn-outline" onclick="showContent('L2-SP')">Super Computer</button>
            <button class="btn btn-outline" onclick="showContent('L2-MF')">Mainframe</button>
            <button class="btn btn-outline" onclick="showContent('L2-WS')">Workstation</button>
            <button class="btn btn-outline" onclick="showContent('L2-PC')">PC</button>
            <button class="btn btn-outline" onclick="showContent('L2-WR')">Wearable</button>
        </div>
        <div id="L2-SP" class="content-box"><h3>Super Computer</h3><p>‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á ‡πÉ‡∏ä‡πâ‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</p></div>
        <div id="L2-MF" class="content-box"><h3>Mainframe</h3><p>‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</p></div>
        <div id="L2-WS" class="content-box"><h3>Workstation</h3><p>‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏Å‡∏£‡∏≤‡∏ü‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°</p></div>
        <div id="L2-PC" class="content-box"><h3>Personal Computer</h3><p>‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</p></div>
        <div id="L2-WR" class="content-box"><h3>Wearable</h3><p>‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏™‡∏ß‡∏°‡πÉ‡∏™‡πà ‡πÄ‡∏ä‡πà‡∏ô Smart Watch</p></div>

        <button class="btn" style="width: 100%; margin-top: 20px;" onclick="startQuiz(2)">‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏¢‡πà‡∏≠‡∏¢ ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2</button>
        <button class="btn btn-outline" style="width: 100%; margin-top: 10px;" onclick="backToMenu()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
    </div>

    <div id="lesson3Section" class="hidden">
        <div class="lesson-header">
            <h2>‡∏ö‡∏ó‡∏ó‡∏µ‡πà 3: ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£</h2>
        </div>
        <div class="grid-menu">
            <button class="btn btn-outline" onclick="showContent('L3-SD')">‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á</button>
            <button class="btn btn-outline" onclick="showContent('L3-RC')">‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö</button>
            <button class="btn btn-outline" onclick="showContent('L3-MS')">‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</button>
            <button class="btn btn-outline" onclick="showContent('L3-MD')">‡∏™‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏≤‡∏á</button>
            <button class="btn btn-outline" onclick="showContent('L3-PT')">‡πÇ‡∏û‡∏£‡πÇ‡∏ï‡∏Ñ‡∏≠‡∏•</button>
        </div>
        <div id="L3-SD" class="content-box"><h3>‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á (Sender)</h3><p>‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p></div>
        <div id="L3-RC" class="content-box"><h3>‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö (Receiver)</h3><p>‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p></div>
        <div id="L3-MS" class="content-box"><h3>‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£ (Message)</h3><p>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á</p></div>
        <div id="L3-MD" class="content-box"><h3>‡∏™‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏≤‡∏á (Medium)</h3><p>‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏≤‡∏á ‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏≤‡∏¢ LAN, Wi-Fi</p></div>
        <div id="L3-PT" class="content-box"><h3>‡πÇ‡∏û‡∏£‡πÇ‡∏ï‡∏Ñ‡∏≠‡∏• (Protocol)</h3><p>‡∏Å‡∏é‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£</p></div>

        <button class="btn" style="width: 100%; margin-top: 20px;" onclick="startQuiz(3)">‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
        <button class="btn btn-outline" style="width: 100%; margin-top: 10px;" onclick="backToMenu()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
    </div>

    <div id="quizContainer" class="hidden quiz-box">
        <h2 id="quizTitle">‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</h2>
        <div id="quizQuestions"></div>
        <button class="btn" onclick="submitQuiz()">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
    </div>

</div>

<script>
    // ******************************************************
    // ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Supabase)
    // ******************************************************
    
    // ‚ö†Ô∏è ‡∏ô‡∏≥‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å Supabase ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏°‡∏≤‡πÉ‡∏™‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ ‚ö†Ô∏è
    const SUPABASE_URL = 'https://fddkpkcmkvitjkouxerg.supabase.co'; 
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZkZGtwa2Nta3ZpdGprb3V4ZXJnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc0NDIxMjQsImV4cCI6MjA4MzAxODEyNH0.7OLB2igeXv3ZbLYQ2AJf-HxGpgyxqjwfAjrDG1rhP3E'; 
    
    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    // ******************************************************
    // ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏£‡∏∞‡∏ö‡∏ö
    // ******************************************************
    let studentInfo = {};
    let currentLesson = 0;
    let startTime;
    let scores = { 1: 0, 2: 0, 3: 0 };

    // ******************************************************
    // ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å
    // ******************************************************

    // 1. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (Login)
    function startSystem() {
        const name = document.getElementById('stdName').value;
        const sClass = document.getElementById('stdClass').value;
        const num = document.getElementById('stdNumber').value;

        if(!name || !sClass || !num) { 
            alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö"); 
            return; 
        }

        studentInfo = { name, class: sClass, number: num };
        startTime = new Date(); // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏£‡∏¥‡∏á
        
        document.getElementById('welcomeText').innerText = `‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ: ${name} (${sClass})`;
        document.getElementById('loginSection').classList.add('hidden');
        document.getElementById('menuSection').classList.remove('hidden');
        
        // ‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• (‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏•‡πà‡∏ô‡πÜ ‡πÉ‡∏´‡πâ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô)
        setInterval(() => {
            const now = new Date();
            const diff = Math.floor((now - startTime) / 1000);
            const m = Math.floor(diff / 60).toString().padStart(2, '0');
            const s = (diff % 60).toString().padStart(2, '0');
            document.getElementById('timerDisplay').innerText = `‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: ${m}:${s}`;
        }, 1000);
    }

    // 2. ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
    function goToLesson(num) {
        document.getElementById('menuSection').classList.add('hidden');
        document.getElementById(`lesson${num}Section`).classList.remove('hidden');
        currentLesson = num;
        document.querySelectorAll('.content-box').forEach(el => el.style.display = 'none');
        document.getElementById('quizContainer').classList.add('hidden');
    }

    function backToMenu() {
        document.getElementById(`lesson${currentLesson}Section`).classList.add('hidden');
        document.getElementById('menuSection').classList.remove('hidden');
    }

    // 3. ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ Jigsaw
    function showContent(id) {
        document.querySelectorAll(`#lesson${currentLesson}Section .content-box`).forEach(el => el.style.display = 'none');
        document.getElementById(id).style.display = 'block';
    }

    // 4. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö (Questions Database)
    const questionsDB = {
        1: [ 
            { q: "‡∏Ç‡πâ‡∏≠‡πÉ‡∏î‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Æ‡∏≤‡∏£‡πå‡∏î‡πÅ‡∏ß‡∏£‡πå?", choices: ["‡πÄ‡∏°‡∏≤‡∏™‡πå", "‡∏ß‡∏¥‡∏ô‡πÇ‡∏î‡∏ß‡∏™‡πå", "‡∏à‡∏≠‡∏†‡∏≤‡∏û", "‡πÅ‡∏£‡∏°"], ans: 1 }, 
            { q: "‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏î‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏™‡∏°‡∏∑‡∏≠‡∏ô‡∏™‡∏°‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå?", choices: ["Harddisk", "RAM", "CPU", "Monitor"], ans: 2 } 
        ],
        2: [ 
            { q: "‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ä‡∏ô‡∏¥‡∏î‡πÉ‡∏î‡πÉ‡∏ä‡πâ‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏≤‡∏Å‡∏≤‡∏®?", choices: ["PC", "Super Computer", "Wearable", "Workstation"], ans: 1 }, 
            { q: "‡∏Ç‡πâ‡∏≠‡πÉ‡∏î‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î?", choices: ["‡πÑ‡∏°‡πà‡∏Å‡∏¥‡∏ô‡∏Ç‡∏ô‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏≠‡∏°", "‡πÄ‡∏ä‡πá‡∏î‡∏à‡∏≠‡∏î‡πâ‡∏ß‡∏¢‡∏ú‡πâ‡∏≤‡πÅ‡∏´‡πâ‡∏á", "‡∏â‡∏µ‡∏î‡∏ô‡πâ‡∏≥‡πÉ‡∏™‡πà‡∏Ñ‡∏µ‡∏¢‡πå‡∏ö‡∏≠‡∏£‡πå‡∏î", "‡∏õ‡∏¥‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î"], ans: 2 } 
        ],
        3: [ 
            { q: "‡∏Ç‡πâ‡∏≠‡πÉ‡∏î‡∏Ñ‡∏∑‡∏≠‡∏™‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏≤‡∏á‡πÑ‡∏£‡πâ‡∏™‡∏≤‡∏¢?", choices: ["‡∏™‡∏≤‡∏¢ LAN", "Wi-Fi", "‡∏™‡∏≤‡∏¢ Fiber Optic", "‡∏™‡∏≤‡∏¢ USB"], ans: 1 }, 
            { q: "Protocol ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?", choices: ["‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á", "‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö", "‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£", "‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏≤‡∏á"], ans: 2 } 
        ]
    };

    // 5. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö
    function startQuiz(lessonId) {
        const quizDiv = document.getElementById('quizQuestions');
        quizDiv.innerHTML = "";
        document.getElementById('quizTitle').innerText = `‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ö‡∏ó‡∏ó‡∏µ‡πà ${lessonId}`;
        
        questionsDB[lessonId].forEach((item, index) => {
            let html = `<div class="question"><p>${index+1}. ${item.q}</p>`;
            item.choices.forEach((choice, cIndex) => {
                html += `<label style="margin-right:15px;"><input type="radio" name="q${index}" value="${cIndex}"> ${choice}</label>`;
            });
            html += `</div>`;
            quizDiv.innerHTML += html;
        });

        document.getElementById('quizContainer').classList.remove('hidden');
        document.getElementById('quizContainer').scrollIntoView({ behavior: 'smooth' });
    }

    // 6. ‡∏ï‡∏£‡∏ß‡∏à‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£
    function submitQuiz() {
        let score = 0;
        const qSet = questionsDB[currentLesson];
        let allAnswered = true;

        qSet.forEach((item, index) => {
            const checked = document.querySelector(`input[name="q${index}"]:checked`);
            if(!checked) allAnswered = false;
            else if(parseInt(checked.value) === item.ans) score++;
        });

        if(!allAnswered) { alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠"); return; }

        scores[currentLesson] = score;
        alert(`‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ö‡∏ó‡∏ó‡∏µ‡πà ${currentLesson} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ ${score}/${qSet.length} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`);
        
        document.getElementById('quizContainer').classList.add('hidden');
        backToMenu();
    }

    // 7. ‡∏à‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤ Supabase
    async function finishAll() {
        const btn = document.querySelector('#menuSection button.btn-outline');
        btn.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...";
        btn.disabled = true;

        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á
        const durationSec = Math.floor((new Date() - startTime) / 1000);
        const durationText = Math.floor(durationSec / 60) + " ‡∏ô‡∏≤‡∏ó‡∏µ " + (durationSec % 60) + " ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ";

        // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ Supabase
        const { data, error } = await supabase
            .from('student_logs')
            .insert([{
                student_name: studentInfo.name,
                student_class: studentInfo.class,
                student_number: studentInfo.number,
                score_lesson1: scores[1],
                score_lesson2: scores[2],
                score_lesson3: scores[3],
                duration_text: durationText
            }]);

        if(error) {
            console.error(error);
            alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + error.message);
            btn.disabled = false;
            btn.innerText = "‡∏•‡∏≠‡∏á‡∏™‡πà‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á";
        } else {
            alert("‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡πÄ‡∏£‡∏µ‡∏¢‡∏ô");
            location.reload(); 
        }
    }
</script>
</body>
</html>

